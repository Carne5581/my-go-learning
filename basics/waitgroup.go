package main

import (
	"fmt"
	"sync" // <-- ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ð¿Ð°ÐºÐµÑ‚ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸
	"time"
)

// ÐžÐ±Ñ€Ð°Ñ‚Ð¸ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ: Ð¼Ñ‹ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÐ¼ *sync.WaitGroup (Ð£ÐšÐÐ—ÐÐ¢Ð•Ð›Ð¬)
// Ð•ÑÐ»Ð¸ ÑƒÐ±Ñ€Ð°Ñ‚ÑŒ Ð·Ð²ÐµÐ·Ð´Ð¾Ñ‡ÐºÑƒ, Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ ÑÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐµÑ‚ Ð±Ð»Ð¾ÐºÐ½Ð¾Ñ‚ ÑÐµÐ±Ðµ, Ð¸ main Ð½Ð¸ÐºÐ¾Ð³Ð´Ð° Ð½Ðµ ÑƒÐ·Ð½Ð°ÐµÑ‚ Ð¾ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ð¸.
func boilKettle(wg *sync.WaitGroup) {
	// defer Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€ÑƒÐµÑ‚, Ñ‡Ñ‚Ð¾ Done() ÑÑ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¿Ñ€Ð¸ Ð²Ñ‹Ð²Ð¾Ð´Ðµ Ð¸Ð· Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸
	defer wg.Done()

	fmt.Println(" ðŸ”¥ Ð§Ð°Ð¹Ð½Ð¸Ðº: ÐÐ°Ñ‡Ð¸Ð½Ð°ÑŽ ÐºÐ¸Ð¿ÑÑ‚Ð¸Ñ‚ÑŒ...")
	time.Sleep(2 * time.Second)
	fmt.Println(" ðŸ”¥ Ð§Ð°Ð¹Ð½Ð¸Ðº: Ð’ÑÐºÐ¸Ð¿ÐµÐ»!")
}

func cutVegetables(wg *sync.WaitGroup) {
	defer wg.Done()

	fmt.Println(" ðŸ”ª ÐžÐ²Ð¾Ñ‰Ð¸: ÐÐ°Ñ‡Ð¸Ð½Ð°ÑŽ Ñ€ÐµÐ·Ð°Ñ‚ÑŒ...")
	time.Sleep(1 * time.Second)
	fmt.Println(" ðŸ”ª ÐžÐ²Ð¾Ñ‰Ð¸: Ð“Ð¾Ñ‚Ð¾Ð²Ñ‹!")
}

func fryMeat(wg *sync.WaitGroup) {
	defer wg.Done()

	fmt.Println(" ðŸ¥© ÐœÑÑÐ¾: Ð–Ð°Ñ€Ð¸Ñ‚ÑÑ...")
	time.Sleep(3 * time.Second)
	fmt.Println(" ðŸ¥© ÐœÑÑÐ¾: Ð¡Ð¾Ñ‡Ð½Ð¾Ðµ Ð¸ Ð³Ð¾Ñ‚Ð¾Ð²Ð¾Ðµ!")
}

func main() {
	fmt.Println("=== ÐšÐ£Ð¥ÐÐ¯ PRO v2.0 (WAITGROUP) ===")
	start := time.Now()

	// 1. Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ "Ð‘Ð»Ð¾ÐºÐ½Ð¾Ñ‚ ÐŸÑ€Ð¾Ñ€Ð°Ð±Ð°"
	var wg sync.WaitGroup

	// 2. ÐÐ°Ð·Ð½Ð°Ñ‡Ð°ÐµÐ¼ Ð·Ð°Ð´Ð°Ñ‡Ð¸
	// Ð£ Ð½Ð°Ñ Ð±ÑƒÐ´ÐµÑ‚ 3 Ð´ÐµÐ»Ð°, Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÑÑ€Ð°Ð·Ñƒ 3
	// (Ð˜Ð»Ð¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ wg.Add(1) Ð¿ÐµÑ€ÐµÐ´ ÐºÐ°Ð¶Ð´Ñ‹Ð¼ Ð·Ð°Ð¿ÑƒÑÐºÐ¾Ð¼)
	wg.Add(3)

	// 3. Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð³Ð¾Ñ€ÑƒÑ‚Ð¸Ð½Ñ‹
	// Ð’ÐÐ–ÐÐž: ÐŸÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ð°Ð´Ñ€ÐµÑ Ð±Ð»Ð¾ÐºÐ½Ð¾Ñ‚Ð° (&wg), Ð° Ð½Ðµ ÐºÐ¾Ð¿Ð¸ÑŽ!
	go boilKettle(&wg)
	go cutVegetables(&wg)
	go fryMeat(&wg)

	fmt.Println(" ðŸ‘¨â€ðŸ³ Ð¨ÐµÑ„: Ð’ÑÐµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ Ñ€Ð¾Ð·Ð´Ð°Ð½Ñ‹, Ð¶Ð´Ñƒ...")

	// 4. Ð‘Ð›ÐžÐšÐ˜Ð ÐžÐ’ÐšÐ
	// ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð²ÑÑ‚Ð°Ð½ÐµÑ‚ Ð½Ð° ÑÑ‚Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐµ Ð¸ Ð±ÑƒÐ´ÐµÑ‚ Ð¶Ð´Ð°Ñ‚ÑŒ,
	// Ð¿Ð¾ÐºÐ° ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº Ð² wg Ð½Ðµ ÑÑ‚Ð°Ð½ÐµÑ‚ 0.
	wg.Wait()

	fmt.Println(" ðŸ‘¨â€ðŸ³ Ð¨ÐµÑ„: Ð’ÑÑ‘ Ð³Ð¾Ñ‚Ð¾Ð²Ð¾! Ð ÐµÑÑ‚Ð¾Ñ€Ð°Ð½ Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ.")
	fmt.Printf("Ð’Ñ€ÐµÐ¼Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹: %s\n", time.Since(start))
}
